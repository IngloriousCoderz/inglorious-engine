import { Canvas, Meta, Source } from "@storybook/addon-docs/blocks"
import * as MultiplayerStories from "./multiplayer.stories"
import player1 from './player1?raw'
import player2 from './player2?raw'

<Meta of={MultiplayerStories} />

# Multiplayer

The Inglorious Engine makes it incredibly easy to set up a real-time multiplayer game. The `@inglorious/server` package provides a simple, server-authoritative WebSocket server that handles all communication and state synchronization for you.

The server for this example is hosted on render.com with a free plan, so it might take a minute for it to wake up before you see the players moving.

If you want to use your own server, just navigate to the `packages/server` directory of the `inglorious-engine` monorepo and run the following command:

```sh
pnpm dev
```

The two client games then should point to the local server by changing the `multiplayer` configuration like so:

```javascript
multiplayer: {
  serverUrl: "ws://localhost:3000",
},
```

## Controls

Once the game is running, you can control your player using a standard keyboard layout.

Player 1 uses the WASD keys to move.

Player 2 uses the IJKL keys to move.

You can also open the two games in different browser windows and selecting the stories "Player 1" and "Player 2", respectively.

<Canvas of={MultiplayerStories.Player1} />

<Canvas of={MultiplayerStories.Player2} />

## Player 1 Game

<Source dark code={player1} />

## Player 2 Game

<Source dark code={player2} />
