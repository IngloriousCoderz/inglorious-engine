import { Canvas, Meta, Source } from '@storybook/addon-docs/blocks'
import * as QuickStart from './quick-start.stories'

import helloWorld from './hello-world?raw'
import firstGame from './first-game?raw'

<Meta of={QuickStart} />

# Quick Start

Welcome to the Inglorious Engine! This guide will walk you through the basic concepts to get you up and running.

## What is Inglorious Engine?

Inglorious Engine is a **functional programming** game engine for JavaScript. Instead of object-oriented programming, it uses:
- **Global state** - One source of truth for your entire game
- **Immutability** - State changes create new state, never modify existing
- **Pure functions** - Predictable, testable, and reusable functions
- **Function composition** - Combine behaviors like building blocks

## Core Concepts

An Inglorious Engine game is defined by a configuration object. The main building blocks are:

-   **Entities**: The "things" in your game (player, enemies, items).
-   **Types & Behaviors**: Reusable templates and logic for your entities.
-   **Systems**: Global logic that orchestrates entities, like physics or animation.

For a deeper dive into these, check out the **[Core Concepts](/docs/engine--docs)** documentation.

The two main ways to implement game logic are with **Behaviors** and **Systems**. While behaviors are attached to specific entity types, systems operate globally. You can read a detailed comparison in the **[Systems documentation](/docs/engine-systems--docs)**.

## Your First Game

Let's start with a "Hello World" example and then build a simple game.

### Step 1: Basic Setup

Create an HTML file with this structure:

```html
<!DOCTYPE html>
<html lang="en">
  <body>
    <canvas id="canvas"></canvas>

    <script type="text/javascript">
      window.process = { env: "development" }
    </script>

    <script type="importmap">
      {
        "imports": {
          "immer": "https://unpkg.com/immer@10.1.1/dist/immer.mjs",
          "@inglorious/utils/": "https://unpkg.com/@inglorious%2Futils@1.1.0/",
          "@inglorious/store/": "https://unpkg.com/@inglorious%2Fstore@2.0.0/",
          "@inglorious/engine/": "https://unpkg.com/@inglorious%2Fengine@0.7.0/",
          "@inglorious/renderers/": "https://unpkg.com/@inglorious%2Frenderer-2d@0.2.0/",
          "game": "/game.js"
        }
      }
    </script>

    <script
      type="module"
      src="https://unpkg.com/@inglorious%2Fengine@0.7.0/main.js"
    ></script>
  </body>
</html>
```

### Step 2: Hello World

Create `my-game.js` with the simplest possible game:

<Source dark code={helloWorld} />

<Canvas of={QuickStart.HelloWorld} />

This creates an 800x600 canvas with a light grey background. Not exciting yet, but it's working!

### Step 3: Add a Character

Let's add something to the scene:

<Source dark code={firstGame} />

<Canvas of={QuickStart.FirstGame} />

## Key Concepts

### 1. Game Configuration Structure

Every game has this structure:
```javascript
export default {
  // Optional systems - cross-entity behaviors
  systems: [
    // List all needed systems, or create your own!
  ],

  // Static definitions - never change
  types: {
    // Define what kinds of objects exist
  },
  
  // Dynamic state - changes during gameplay
  entities: {
    // Actual objects in the scene
  }
}
```

### 2. Types vs Entities

- **Types**: Define what something *is* (like a blueprint)
- **Entities**: Define specific *examples* of that type (like actual objects)

### 3. Event Handlers

To make things move and interact, use event handlers:

```javascript
types: {
  character: {
    // Drawing logic here
    render(entity, ctx) { /* ... */ },
    
    // Event handlers here
    update(entity, event, { dt, config, entities }) {
      // This runs every frame
      // Update position, velocity, etc.
    }
  }
}
```

## Next Steps

Now that you have a basic understanding of the engine, you're ready to dive deeper.

Continue to the **[Core Concepts](/docs/engine--docs)** page to learn about event handlers, code reuse, and other essential features.

## Why Functional Programming?

Traditional game engines use objects with methods that modify internal state. Inglorious Engine is different:

✅ **Predictable**: Same input always produces same output  
✅ **Testable**: Pure functions are easy to test  
✅ **Composable**: Combine behaviors like LEGO blocks. This is a core part of the engine's **[Composition over Inheritance](/docs/engine-core-concepts-composition--docs)** philosophy  
✅ **Debuggable**: Trace state changes frame-by-frame, and even enable time-travel debugging  
✅ **Networked**: Multiplayer made easy with simple event synchronization  
✅ **Flexible**: Add new properties to entities on the fly, no classes needed  
✅ **Performant**: Immutability enables efficient rendering  

Ready to build your first game? Let's go!
