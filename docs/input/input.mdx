import { Canvas, Meta, Source } from '@storybook/addon-docs/blocks'
import * as Input from './input.stories'

import mouse from "./mouse?raw"
import keyboard from "./keyboard?raw"
import gamepad from "./gamepad?raw"
import controls from "./controls?raw"

<Meta of={Input} />

# Input

It's pretty easy to add input controls to your game. Let's have a look.

## Mouse

If you need mouse support, it's as easy as using the `mouse()` behavior. It automatically detects movement and clicks on any entity in the scene.

You can get a reference to any entity in the scene by invoking the `api.getEntity(id)` method. The `api` object is a property of the context parameter, which is always the third parameter of an event handler.

<Source dark code={mouse} />

<Canvas of={Input.Mouse} />

## Keyboard

Using the keyboard is very similar, but we also need to specify an id for the input and some mapping configuration. This way we can create multiple mappings that can work at the same time!

Also, please note how we are using some predefined functions to achieve our goal:

- `zero()` returns a vector with the three coordinates set to zero;
- `move()` calculates orientation, position, and velocity;
- `merge()` applies those calculations to the entity.

<Source dark code={keyboard} />

<Canvas of={Input.Keyboard} />

## Gamepad

If you plug a gamepad, there's a high chance that the engine will recognize it and you will be able to control your character with the D-pad or the left axis.

<Source dark code={gamepad} />

<Canvas of={Input.Gamepad} />

## Controls

Want to make both keyboard and gamepad work? Use the `controlsTypes()` and `controlsEntities()` functions then!

You'll probably always want to use these two instead of dealing with keyboards and gamepads separately, but who am I to judge?

<Source dark code={controls} />

<Canvas of={Input.Controls} />