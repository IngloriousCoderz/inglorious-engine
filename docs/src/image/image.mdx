import { Canvas, Meta, Source } from '@storybook/addon-docs/blocks'
import RendererChooser from '../renderer-chooser.jsx'
import image from './image.js?raw'
import lazyLoading from './lazy-loading.js?raw'
import sprite from './sprite.js?raw'
import tilemap from './tilemap.js?raw'
import * as Image from './image.stories'

<Meta of={Image} />

# Image Rendering

The Inglorious Engine provides capabilities for rendering images, sprites, and tilemaps. This is essential for creating visually rich games.

## Images

The most basic form of image rendering is displaying a static image. This can be used for backgrounds, UI elements, or any non-animated visual asset. In Inglorious Engine, this is achieved by creating an entity with an `image` component and a `renderImage` behavior.

Here's a simple configuration for rendering an image:

<Source dark code={image} />

The `image` component specifies the source of the image and its properties like scale.

Below is a live example of a static image.

<Canvas of={Image.Image} />

## Tilemaps

Tilemaps are a common technique used to create game levels or large images by stitching together smaller images called tiles. The engine provides a `renderTilemap` behavior for this purpose.

An entity with a tilemap would look like this:

<Canvas of={Image.Tilemap} />

<Source dark code={tilemap} />

## Sprites

Sprites are 2D images or animations that are integrated into a larger scene. In the Inglorious Engine, a sprite is an entity with a `sprite` component and a `renderSprite` behavior.

<Canvas of={Image.Sprite} />

Animations are driven by the `spriteAnimationSystem`, which must be included in your game's `systems` array. This system allows for declarative control over animations: simply set the `entity.sprite.state` property to the name of the desired animation (e.g., "sleepy", "walk_left"), and the system will handle advancing the frames.

The `spriteAnimationSystem` is a good example of a **System** in Inglorious Engine. You can learn more about **[Systems and how they compare to entity behaviors](/docs/engine-systems--docs)**.

The `sprite` component contains information about the image source, its dimensions, and the animation frames. In the example above, the `start` event handler sets the sprite's state to "sleepy", which the `spriteAnimationSystem` uses to play the corresponding animation.

<Source dark code={sprite} />

## Lazy Loading

Images can be preloaded by defining them in the `images` entity of your game configuration. However, if you provide a `src` URL directly within an entity's `image`, `sprite`, or `tilemap` component without a corresponding entry in the global `images` object, the engine will automatically lazy-load that asset.

<Canvas of={Image.LazyLoading} />

This is useful for images that are not required immediately at the start of the game, as it can help improve initial load times. The engine will fetch the image the first time it needs to be rendered.

<Source dark code={lazyLoading} />
