import { Meta } from '@storybook/blocks'

import {
angle,
clamp,
conjugate,
divide,
fromAngle,
magnitude,
mod,
multiply,
normalize,
rotate,
setAngle,
setMagnitude,
shift,
toCartesian,
toCylindrical,
toPolar,
toString,
unit,
} from '@inglorious/utils/math/linear-algebra/vector'
import { pi, cos, sin } from '@inglorious/utils/math/trigonometry'

<Meta title="Utils/Math/Linear Algebra/Vector" />

# Vector

Functions that deal with a single vector.

## Angle

Returns the angle of a vector, calculated as the `atan2` between the last and first coordinate.

<code>angle([1, 1]) == {angle([1, 1]).toFixed(3)}</code> (&asymp;&pi;/4)

<code>angle([1, 0, 1]) == {angle([1, 0, 1]).toFixed(3)}</code> (&asymp;&pi;/4)

## Clamp

Limits the magnitude of a vector to a lower and upper bound.

<code>clamp([6, 8], 0, 5) == {toString(clamp([6, 8], 0, 5))}</code>&nbsp;

<code>clamp([3, 4], 0, 5) == {toString(clamp([3, 4], 0, 5))}</code>&nbsp;

Bounds can be specified as other vectors too.

<code>clamp([6, 8], [0, 0], [3, 4]) == {toString(clamp([6, 8], [0, 0], [3, 4]))}</code>&nbsp;

## Conjugate

Flips the sign of all coordinates except the first one.

<code>conjugate([1, 2, 3]) == {toString(conjugate([1, 2, 3]))}</code>&nbsp;

## Divide

Divides any vector by a scalar.

<code>divide([4, 8, 12], 4) == {toString(divide([4, 8, 12], 4))}</code>&nbsp;

## From Angle

Creates a 3D unit vector from a given angle.

<code>fromAngle(pi() / 4) == {toString(fromAngle(pi() / 4))}</code>&nbsp;

## Length

Alias of `magnitude`.

## Magnitude

Computes the magnitude of any vector (alias `length`).

<code>magnitude([3, 4]) == {magnitude([3, 4])}</code>&nbsp;

## Mod

Applies the `mod` operator on any vector (alias `remainder`).

<code>mod([10, 12, -18], 12) == {toString(mod([10, 12, -18], 12))}</code>&nbsp;

## Multiply

Multiplies a vector with a scalar (alias `times`).

<code>multiply([1, 2, 3], 4) == {toString(multiply([1, 2, 3], 4))}</code>&nbsp;

## Normalize

Gives the vector unit length while maintaining its angle.

<code>normalize([3, 4]) == {toString(normalize([3, 4]), 1)}</code>&nbsp;

<code>normalize([-3, -4]) == {toString(normalize([-3, -4]), 1)}</code>&nbsp;

## Remainder

Alias of `mod`.

## Rotate

Adds the given angle to a 2D or 3D vector using quaternions.

<code>rotate([1, 0], 0) == {toString(rotate([1, 0], 0))}</code>&nbsp;

<code>rotate([1, 0], pi() / 4) == {toString(rotate([1, 0], pi() / 4), 3)}</code> (&asymp;[cos(&pi;/4), sin(&pi;/4)])

<code>rotate([1, 0, 0], 0) == {toString(rotate([1, 0, 0], 0))}</code>&nbsp;

<code>rotate([1, 0, 0], pi() / 4) == {toString(rotate([1, 0, 0], pi() / 4), 3)}</code> (&asymp;[cos(&pi;/4), 0, sin(&pi;/4)])

<code>rotate([-1, 0, 0], pi() / 4) == {toString(rotate([-1, 0, 0], pi() / 4), 3)}</code> (&asymp;[cos(-3/4*&pi;), 0, sin(-3/4*&pi;)])

## Set Angle

Changes the angle of a vector.

<code>setAngle([cos(pi() / 4), 0, sin(pi() / 4)], pi() / 2) == {toString(setAngle([cos(pi() / 4), 0, sin(pi() / 4)], pi() / 2))}</code>&nbsp;

## Set Magnitude

Changes the magnitude of any vector, keeping its angle.

<code>setMagnitude([3, 4], 10) == {toString(setMagnitude([3, 4], 10))}</code>&nbsp;

<code>setMagnitude([-3, -4], 10) == {toString(setMagnitude([-3, -4], 10))}</code>&nbsp;

## Shift

Moves coordinates around by a certain index.

<code>shift([1, 2, 3, 4, 5], 2) == {toString(shift([1, 2, 3, 4, 5], 2))}</code>&nbsp;

## Times

Alias of `multiply`.

## To Cartesian

Converts a 2D polar vector into cartesian coordinates.

<code>toCartesian([2 ** 0.5, pi() / 4]) == {toString(toCartesian([2 ** 0.5, pi() / 4]))}</code>&nbsp;

## To Cylindrical

Converts a 3D cartesian vector to cylindrical coordinates.

<code>toCylindrical([1, 1, 1]) == {toString(toCylindrical([1, 1, 1]), 3)}</code>&nbsp;

## To Polar

Converts a 2D cartesian vector to polar coordinates.

<code>toPolar([1, 1]) == {toString(toPolar([1, 1]))}</code> (&asymp;[&#8730;2, &pi;/4])

## To Spherical

*This section is yet to be documented.*

## To String

Returns a string representation of any vector, up to optional decimal points.

<code>toString([1, 0]) == "{toString([1, 0])}"</code>&nbsp;

<code>toString([cos(pi() / 4), 0], 3) == "{toString([cos(pi() / 4), 0], 3)}"</code>&nbsp;

## Unit

Returns a unit 3D vector at a given optional angle.

<code>unit() == {toString(unit())}</code>&nbsp;

<code>unit(pi() / 2) == {toString(unit(pi() / 2))}</code>&nbsp;
